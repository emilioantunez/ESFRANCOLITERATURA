---
interface Props {
  src: string;
  alt: string;
  caption?: string;
  width?: number | string;
  height?: number | string;
  loading?: 'lazy' | 'eager';
}
const { src, alt, caption, width, height, loading = 'lazy' } = Astro.props as Props;
const base = import.meta.env.BASE_URL || '/';
---
<figure class="img">
  <img src={`${base}${src.replace(/^\//,'')}`} alt={alt} width={width} height={height} loading={loading} decoding="async" />
  {caption && <figcaption>{caption}</figcaption>}
</figure>

<style>
.img{margin:1.25rem 0}
.img img{border-radius:12px;border:1px solid #222;background:#0f0f12;display:block;max-width:100%;height:auto}
.img figcaption{color:var(--muted);font-size:.9rem;margin-top:.35rem;text-align:center}
</style>
